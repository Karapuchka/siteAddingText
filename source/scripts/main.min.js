"use strict";const detect=new MobileDetect(window.navigator.userAgent),modalAddNote=document.forms.addNote,modalFilter=document.querySelector(".options__filter-modal"),addNoteBtn=document.querySelector(".add-note__btn"),noteList=document.querySelector(".note-list"),countNoteFooter=document.getElementById("count-note__item"),templateNote=document.getElementById("note-layout"),filterBtn=document.getElementById("filter-btn");if(0<window.localStorage.length)for(let e=0;e<window.localStorage.length;e++){let t=localStorage.getItem(localStorage.key(e));newNoteToDOM(t=JSON.parse(t),templateNote,noteList),countNoteFooter.innerText=""+localStorage.length}function modalMove(t,e){e.classList.contains("no-active")?(e.classList.remove("no-active"),e.classList.add("active"),t.style.display="flex",gsap.to(t,{delay:.4,opacity:1,y:10,duration:1,zIndex:8,ease:"back.out(3)"})):(e.classList.remove("active"),e.classList.add("no-active"),gsap.to(t,{opacity:0,y:-10,zIndex:1,duration:1,ease:"back.in(3)"}),setTimeout(()=>{t.style.display="none"},1100))}function modalClose(t,e){e.classList.remove("active"),e.classList.add("no-active"),gsap.to(t,{opacity:0,y:-10,zIndex:1,duration:1,ease:"back.in(3)"}),setTimeout(()=>{t.style.display="none"},1100)}null==detect.mobile()?(window.addEventListener("pointerover",t=>{t.target.closest(".jsBtnAnimation")&&!t.target.closest(".options__filter-modal__btn__arrow--active")&&gsap.to(t.target.closest(".jsBtnAnimation"),{duration:.7,backgroundColor:"#d8d7d7"}),t.target.closest(".note-list__item__btns__btn")&&gsap.to(t.target.closest(".note-list__item__btns__btn"),{duration:.7,backgroundColor:"#d8d7d7"})}),window.addEventListener("pointerout",t=>{t.target.closest(".jsBtnAnimation")&&!t.target.closest(".options__filter-modal__btn__arrow--active")&&gsap.to(t.target.closest(".jsBtnAnimation"),{duration:.7,backgroundColor:"#ffffff"}),t.target.closest(".note-list__item__btns__btn")&&gsap.to(t.target.closest(".note-list__item__btns__btn"),{duration:.7,backgroundColor:"#ffffff"})})):window.addEventListener("click",t=>{t.target.closest(".jsBtnAnimation")&&(gsap.to(t.target.closest(".jsBtnAnimation"),{duration:.7,backgroundColor:"#fff"}),setTimeout(()=>{gsap.to(t.target.closest(".jsBtnAnimation"),{duration:.7,backgroundColor:"#ffffff"})},1800)),t.target.closest(".note-list__item__btns__btn")&&(gsap.to(t.target.closest(".note-list__item__btns__btn"),{duration:.7,backgroundColor:"#fff"}),setTimeout(()=>{gsap.to(t.target.closest(".note-list__item__btns__btn"),{duration:.7,backgroundColor:"#ffffff"})},1800))}),window.addEventListener("click",t=>{if(t.target.closest("#filter-btn")&&!t.target.closest(".options__filter-modal")?modalMove(modalFilter,filterBtn):t.target.closest("#filter-btn")||t.target.closest(".options__filter-modal")||filterBtn.classList.contains("active")&&modalClose(modalFilter,filterBtn),t.target.closest(".add-note__btn")&&!t.target.closest(".add-note__modal")?modalMove(modalAddNote,addNoteBtn):t.target.closest(".add-note__btn")||t.target.closest(".add-note__modal")||addNoteBtn.classList.contains("active")&&modalClose(modalAddNote,addNoteBtn),t.target.closest(".note__list__item__btns-delete")){var e=t.target.closest(".note__list__item__btns-delete").parentNode.parentNode.children[0].children[0].innerText;if(searchItemToStorage.getItemName(e)==e){for(let t=0;t<noteList.children.length;t++)noteList.children[t].children[0].innerText==e&&noteList.children[t].remove();localStorage.removeItem(e),countNoteFooter.innerText=""+localStorage.length}}t.target.closest(".note__list__item__btns-edit")&&console.log("edit")}),modalAddNote.addEventListener("click",t=>{t.target.closest(".add-note__modal__btn")&&(""!=modalAddNote.elements.addNoteTitle.value?(0==window.localStorage.length?addNoteToStorage(templateNote,noteList,modalAddNote.elements.addNoteTitle.value,modalAddNote.elements.addNoteSubTitle.value):searchItemToStorage.getItem(modalAddNote.elements.addNoteTitle.value)?(addNoteToStorage(templateNote,noteList,modalAddNote.elements.addNoteTitle.value,modalAddNote.elements.addNoteSubTitle.value),countNoteFooter.innerText=""+localStorage.length):(modalAddNote.elements.addNoteTitle.setAttribute("placeholder","Заметка уже существует!"),gsap.to(modalAddNote.elements.addNoteTitle,{borderColor:"red",boxShadow:"1px 1px red, 1px -1px red, -1px 1px red, -1px -1px red"})),modalAddNote.elements.addNoteTitle.value="",modalAddNote.elements.addNoteSubTitle.value=""):gsap.to(modalAddNote.elements.addNoteTitle,{borderColor:"red",boxShadow:"1px 1px red, 1px -1px red, -1px 1px red, -1px -1px red"})),t.target.closest(".add-note__modal__input")&&(modalAddNote.elements.addNoteTitle.setAttribute("placeholder","Название"),gsap.to(modalAddNote.elements.addNoteTitle,{borderColor:"black",boxShadow:"none"}))}),modalFilter.addEventListener("click",t=>{if(t.target.closest(".options__filter-modal__btn__arrow")&&(t.target.classList.contains("options__filter-modal__btn__arrow--up")&&(t.target.classList.add("options__filter-modal__btn__arrow--active"),document.querySelector("#arrowUp").setAttribute("checked","checked"),document.querySelector("#arrowDown").removeAttribute("checked"),document.querySelector(".options__filter-modal__btn__arrow--down").classList.remove("options__filter-modal__btn__arrow--active"),document.querySelector(".options__filter-modal__btn__arrow--down").style.backgroundColor="#fff"),t.target.classList.contains("options__filter-modal__btn__arrow--down")&&(t.target.classList.add("options__filter-modal__btn__arrow--active"),document.querySelector("#arrowDown").setAttribute("checked","checked"),document.querySelector("#arrowUp").removeAttribute("checked"),document.querySelector(".options__filter-modal__btn__arrow--up").classList.remove("options__filter-modal__btn__arrow--active"),document.querySelector(".options__filter-modal__btn__arrow--up").style.backgroundColor="#fff")),t.target.closest("#filter-modal-name")){if(document.querySelector("#arrowUp").getAttribute("checked")){var e=n(document.querySelector(".note-list").children,!0);document.querySelector(".note-list").innerHTML="";for(let t=0;t<e.length;t++)document.querySelector(".note-list").appendChild(e[t])}if(document.querySelector("#arrowDown").getAttribute("checked")){var o=n(document.querySelector(".note-list").children,!1);document.querySelector(".note-list").innerHTML="";for(let t=0;t<o.length;t++)document.querySelector(".note-list").appendChild(o[t])}}function n(o,n){let l=[],a=[];for(let t=0;t<o.length;t++)a.push(o[t].children[0].innerText.toUpperCase());a.sort();for(let e=0;e<=o.length-1;e++)for(let t=0;t<=a.length-1;t++)a[e]===o[t].children[0].innerText.toUpperCase()&&(n&&l.unshift(o[t]),n||l.push(o[t]));return l}});class Note{constructor(t,e,o,n){this.title=t,this.subtitle=e,this.dateAdd=o,this.dateEdit=n}content={element:""};addContent(t){this.content.element=""+t}deleteContent(){this.content.element=""}}function addNoteToStorage(t,e,o,n){o=new Note(""+o,""+n,"dateAdd","dateEdit");localStorage.setItem(o.title,JSON.stringify(o)),newNoteToDOM(o,t,e)}function newNoteToDOM(t,e,o){e.content.querySelector(".note-list__item__subtitle").textContent=t.subtitle,e.content.querySelector(".note-list__item__title").textContent=t.title,e.content.querySelector(".note-list__item__date").textContent=t.dateEdit;t=e.content.cloneNode(!0);o.append(t)}let searchItemToStorage={getItem:e=>{let o=!0;for(let t=0;t<window.localStorage.length;t++){var n=window.localStorage.getItem(window.localStorage.key(t));if(JSON.parse(n).title==e){o=!1;break}o=!0}return o},getItemName:e=>{for(let t=0;t<window.localStorage.length;t++){var o=window.localStorage.getItem(window.localStorage.key(t));if((o=JSON.parse(o)).title==e)return o.title}}};