"use strict";const body=document.body,instructionBtn=document.querySelector(".instruction-btn"),formSearch=document.forms.formSearch,formSearchTextAreas=document.querySelectorAll(".form-search__textarea"),formSearchBtns=document.querySelectorAll(".form-search__btn"),modalChange=document.querySelector(".modal-change"),modalChangeBtns=document.querySelectorAll(".modal-change__btn"),modalChangeInput=document.getElementById("modal-change__input"),modalChangeBtnConfirm=document.getElementById("modal-change__btn-confirm"),modalChangeBtnCancel=document.getElementById("modal-change__btn-cancel");let symbolToSearch,firstOldText,lastOldText,mainText,countInstruction=0,arrayIndexText=[];function fromInputResultStyle(){0==formSearchTextAreas[2].value.length?(formSearchTextAreas[1].style.color="gray",formSearchTextAreas[1].innerText="Result"):formSearchTextAreas[1].style.color="black"}function modalHidden(e){e.target.closest(".modal-change .modal-change__container")||(gsap.to(instructionBtn,{cursor:"pointer",color:"#000"}),gsap.to(modalChange,{duration:2.5,y:120,ease:"back.in(3)",opacity:0}),setTimeout(function(){modalChange.style.display="flex",gsap.to([body,formSearchTextAreas,formSearchBtns],{duration:2,background:"#fff",ease:"power4.out"}),formSearchBtns.forEach(e=>{e.style.cursor="pointer",e.removeAttribute("disabled"),e.addEventListener("mouseover",function(){gsap.to(e,{duration:.7,background:"#71AAFF",ease:"power4.out"})}),e.addEventListener("mouseout",function(){gsap.to(e,{duration:.7,background:"#fff",ease:"power4.out"})})}),formSearchTextAreas[0].removeAttribute("readonly"),formSearchTextAreas[2].removeAttribute("readonly"),0!=valueIputsForm.length&&formSearchTextAreas.forEach(function(t,o){try{t.value=valueIputsForm[o]}catch(e){t.innerText=valueIputsForm[o]}}),valueIputsForm=[],modalChange.classList.remove("jsModal-active")},3e3)),setTimeout(function(){body.removeEventListener("click",modalHidden)},10)}function addSpanToFormSearch(e){let t=document.createElement("span");return t.style.background="#71AAFF",t.innerText=""+e,t}function addListToFormSearch(){let e=document.createElement("ul");return e.style.display="flex",e.style.flexDirection="column",e.style.justifyContent="flex-start",e.style.width="100%",e.setAttribute("class","list-result"),e}function addItemListToFormSearch(e,t){let o=document.createElement("li");return o.style.width="100%",o.style.listStyle="none",o.style.cursor="pointer",o.innerText=t+": "+e,o}function instructionMouseOut(){gsap.to(instructionBtn,{color:"#000",duration:.3,ease:"power1.out"})}function instructionMouseOver(){gsap.to(instructionBtn,{color:"#71AAFF",duration:.3,ease:"power1.out"})}fromInputResultStyle(),instructionBtn.addEventListener("mouseout",instructionMouseOut),instructionBtn.addEventListener("mouseover",instructionMouseOver),addMouseOver(instructionBtn,"#71AAFF"),addMouseOut(instructionBtn,"#000"),formSearchBtns.forEach(function(e){e.addEventListener("mouseover",function(){gsap.to(e,{duration:.7,background:"#71AAFF",ease:"power4.out"})}),e.addEventListener("mouseout",function(){gsap.to(e,{duration:.7,background:"#fff",ease:"power4.out"})})}),modalChangeBtns.forEach(function(e){e.addEventListener("mouseover",function(){gsap.to(e,{duration:.7,background:"#71AAFF",ease:"power4.out"})}),e.addEventListener("mouseout",function(){gsap.to(e,{duration:.7,background:"#fff",ease:"power4.out"})})}),formSearch.addEventListener("click",function(e){if(e.target.closest(".form-search__btn")&&e.preventDefault(),e.target.closest("#formSearch__btn-search"))if(""==formSearchTextAreas[2].value)alert("Enter text"),fromInputResultStyle();else{formSearchTextAreas[1].innerText="";var t=formSearchTextAreas[2].value;let o=new RegExp(""+t,"gi");const r=addListToFormSearch();for(formSearchTextAreas[1].appendChild(r);mainText=o.exec(formSearchTextAreas[0].value);)countInstruction++,arrayIndexText.push(o.lastIndex),r.appendChild(addItemListToFormSearch(mainText,countInstruction));fromInputResultStyle();const n=document.querySelectorAll(".list-result li");r.addEventListener("mouseover",function(e){if(e.target.closest("li").classList.contains("active"))return!1;e=e.target.closest("li"),gsap.to(e,{duration:1,background:"#f0f0f0",ease:"power4.out"})}),r.addEventListener("mouseout",function(e){if(e.target.closest("li").classList.contains("active"))return!1;e=e.target.closest("li"),gsap.to(e,{duration:1,background:"transparent",color:"#000",ease:"power4.out"})}),r.addEventListener("click",function(e){e.target.closest("li").classList.contains("active")?(e.target.closest("li").classList.remove("active"),gsap.to(e.target.closest("li"),{duration:1,background:"transparent",color:"#000",ease:"power4.out"})):(e.target.closest("li").classList.add("active"),n.forEach(function(e,t){e.classList.contains("active")&&(o.lastIndex=arrayIndexText[t-1],symbolToSearch=o.exec(formSearchTextAreas[0].value),firstOldText=formSearchTextAreas[0].value.substring(0,o.lastIndex-symbolToSearch[0].length),lastOldText=formSearchTextAreas[0].value.substring(o.lastIndex,formSearchTextAreas[0].value.length))}),gsap.to(e.target.closest("li"),{duration:1,background:"#71AAFF",color:"#fff",ease:"power4.out"}))})}!e.target.closest("#formSearch__btn-change")||"Result"!=!formSearchTextAreas[1].innerText&&"Результат"!=!formSearchTextAreas[1].innerText||(gsap.to([body,formSearchTextAreas,formSearchBtns],{duration:2,background:"#D8D8D8",ease:"power4.out",userSelect:"none"}),instructionBtn.removeEventListener("click",instructionAnimation),gsap.to(instructionBtn,{cursor:"default",color:"gray"}),formSearchBtns.forEach(e=>{e.style.cursor="default",e.setAttribute("disabled","disabled")}),formSearchTextAreas.forEach(e=>{e.setAttribute("readonly","readonly")}),modalChange.style.display="flex",setTimeout(function(){gsap.to(modalChange,{opacity:1,duration:2.5,ease:"back.out(3)",y:-120}),body.addEventListener("click",modalHidden)},1e3))}),modalChange.addEventListener("click",function(e){e.target.closest(".modal-change__btn")&&(e.preventDefault(),e.target.closest("#modal-change__btn-confirm")&&(modalChangeInput.value,formSearchTextAreas[0].value=""+firstOldText+modalChangeInput.value+lastOldText),e.target.closest("#modal-change__btn-cancel")&&(gsap.to(instructionBtn,{cursor:"pointer",color:"#000"}),gsap.to(modalChange,{duration:2.5,y:120,ease:"back.in(3)",opacity:0}),setTimeout(function(){modalChange.style.display="flex",gsap.to([body,formSearchTextAreas,formSearchBtns],{duration:2,background:"#fff",ease:"power4.out"}),formSearchBtns.forEach(e=>{e.style.cursor="pointer",e.removeAttribute("disabled"),e.addEventListener("mouseover",function(){gsap.to(e,{duration:.7,background:"#71AAFF",ease:"power4.out"})}),e.addEventListener("mouseout",function(){gsap.to(e,{duration:.7,background:"#fff",ease:"power4.out"})})}),formSearchTextAreas[0].removeAttribute("readonly"),formSearchTextAreas[2].removeAttribute("readonly"),0!=valueIputsForm.length&&formSearchTextAreas.forEach(function(t,o){try{t.value=valueIputsForm[o]}catch(e){t.innerText=valueIputsForm[o]}}),valueIputsForm=[],modalChange.classList.remove("jsModal-active")},3e3),setTimeout(function(){body.removeEventListener("click",modalHidden)},10)))});let countPart=0,valueIputsForm=[];function instructionAnimation(){countPart++,addMouseOver(instructionBtn,"#0029FF"),addMouseOut(instructionBtn,"#0029FF"),1==countPart&&(formSearchTextAreas.forEach(function(t){try{null==t.value&&0==t.value.length||(valueIputsForm.push(t.value),t.value="")}catch(e){null==t.innerText&&0==t.innerText.length||(valueIputsForm.push(t.innerText),t.innerText="")}}),gsap.to(instructionBtn,{textDecoration:"none",color:"#0029FF",ease:"power4.out"}),gsap.to([body,formSearchTextAreas[1],formSearchTextAreas[2],formSearchBtns],{duration:2,background:"#D8D8D8",ease:"power4.out",userSelect:"none"}),formSearchBtns.forEach(e=>{e.style.cursor="default",e.setAttribute("disabled","disabled")}),formSearchTextAreas.forEach(e=>{e.setAttribute("readonly","readonly")}),instructionBtn.innerText="In this field, you must enter the text in which the search will be performed.",instructionBtn.appendChild(addSpanToInstruction())),2==countPart&&(gsap.to(formSearchTextAreas[0],{duration:1,background:"#D8D8D8",ease:"power4.out"}),gsap.to(formSearchTextAreas[1],{duration:1,background:"#fff",ease:"power4.out"}),instructionBtn.innerText="In this field, you must enter the text that we will search for.",instructionBtn.appendChild(addSpanToInstruction())),3==countPart&&(gsap.to(formSearchTextAreas[1],{duration:1,background:"#D8D8D8",ease:"power4.out"}),gsap.to(formSearchTextAreas[2],{duration:1,background:"#fff",ease:"power4.out"}),instructionBtn.innerText="This field displays the final search result.",instructionBtn.appendChild(addSpanToInstruction())),4==countPart&&(gsap.to(formSearchTextAreas[2],{duration:1,background:"#D8D8D8",ease:"power4.out"}),gsap.to(formSearchBtns[0],{duration:1,background:"#fff",ease:"power4.out"}),instructionBtn.innerText="Pressing this button will search with an underline for the search word.",instructionBtn.appendChild(addSpanToInstruction())),5==countPart&&(gsap.to(formSearchBtns[0],{duration:1,background:"#D8D8D8",ease:"power4.out"}),gsap.to(formSearchBtns[1],{duration:1,background:"#fff",ease:"power4.out"}),instructionBtn.innerText="Pressing this button will replace the word.",instructionBtn.appendChild(addSpanToInstruction())),6==countPart&&(countPart=0,instructionBtn.innerText="How to use?",instructionBtn.style.textDecoration="underline",instructionBtn.style.color="#000",addMouseOver(instructionBtn,"#71AAFF"),addMouseOut(instructionBtn,"#000"),gsap.to([body,formSearchTextAreas,formSearchBtns],{duration:2,background:"#fff",ease:"power4.out"}),formSearchBtns.forEach(e=>{e.style.cursor="pointer",e.removeAttribute("disabled"),e.addEventListener("mouseover",function(){gsap.to(e,{duration:.7,background:"#71AAFF",ease:"power4.out"})}),e.addEventListener("mouseout",function(){gsap.to(e,{duration:.7,background:"#fff",ease:"power4.out"})})}),formSearchTextAreas[0].removeAttribute("readonly"),formSearchTextAreas[2].removeAttribute("readonly"),0!=valueIputsForm.length&&formSearchTextAreas.forEach(function(t,o){try{t.value=valueIputsForm[o]}catch(e){t.innerText=valueIputsForm[o]}}),valueIputsForm=[])}function addSpanToInstruction(){let e=document.createElement("span");return e.innerText="ok",e.style.textTransform="uppercase",e.style.color="#71AAFF",e.style.textDecoration="underline",e.style.margin="0 0 0 10px",addMouseOver(e,"#19478c"),addMouseOut(e,"#71AAFF"),e}function addMouseOver(e,t){e.addEventListener("mouseover",function(){gsap.to(e,{duration:.7,color:t,ease:"power4.out"})})}function addMouseOut(e,t){e.addEventListener("mouseout",function(){gsap.to(e,{duration:.7,color:t,ease:"power4.out"})})}instructionBtn.addEventListener("click",instructionAnimation);